# Content
- [CPU Components](#cpu-components)
- [CPU Architecture](#cpu-architecture)
- [Instruction Set Architectures]()
- [Memory](#memory)

![von_neumann_arch](https://github.com/kiro6/Binary-Exploitation-Notes/assets/57776872/bfc5aa79-449a-4992-9fdd-1743ac756980)

# CPU Components 
- Control Unit (CU)
- Arithmetic/Logic Unit (ALU)
- Registers

# CPU Architecture 

**Control Unit (CU) :** which is in charge of moving and controlling data

**Arithmetic/Logic Unit (ALU) :** which is in charge of performing various arithmetics and logical calculations as requested by a program through the assembly instructions.


**Clock Cycle :** The clock cycle is the smallest unit of time in the execution of a full instruction cycle


**Full Instruction Cycle :** includes the following stages:
- Fetch: The CPU retrieves the instruction from memory.
- Decode: The CPU decodes the instruction to understand what operation needs to be performed
- Execute: The CPU performs the actual operation or computation specified by the instruction.
- Store: The CPU may store the result back in memory or in a register.







# Instruction Set Architectures
- An Instruction Set Architecture (ISA) specifies the syntax and semantics of the assembly language on each architecture.
- It is not just a different syntax but is built in the core design of a processor, as it affects the way and order instructions are executed and their level of complexity

#### ISA Contain

| Component           | Description                                               | Example                                      |
|---------------------|-----------------------------------------------------------|----------------------------------------------|
| Instructions        | The instruction to be processed in the opcode operand_list format. There are usually 1, 2, or 3 comma-separated operands. | `add rax, 1`, `mov rsp, rax`, `push rax`      |
| Registers           | Used to store operands, addresses, or instructions temporarily. | `rax`, `rsp`, `rip`                          |
| Memory Addresses    | The address in which data or instructions are stored. May point to memory or registers. | `0xffffffffaa8a25ff`, `0x44d0`, `$rax`       |
| Data Types          | The type of stored data.                                   | `byte`, `word`, `double word`                |


#### CISC vs. RISC

**Complex Instruction Set Computer (CISC) :**  Used in Intel and AMD processors in most computers and servers.

**Reduced Instruction Set Computer (RISC) :** Used in ARM and Apple processors, in most smartphones, and some modern laptops.



| Area                        | CISC                                | RISC                               |
|-----------------------------|-------------------------------------|------------------------------------|
| Complexity                 | Favors complex instructions         | Favors simple instructions        |
| Length of instructions      | Longer instructions - Variable length 'multiples of 8-bits' | Shorter instructions - Fixed length '32-bit/64-bit' |
| Total instructions per program | Fewer total instructions - Shorter code | More total instructions - Longer code |
| Optimization                | Relies on hardware optimization (in CPU) | Relies on software optimization (in Assembly) |
| Instruction Execution Time  | Variable - Multiple clock cycles     | Fixed - One clock cycle           |
| Instructions supported by CPU | Many instructions (~1500)           | Fewer instructions (~200)         |
| Power Consumption           | High                                | Very low                           |
| Examples                    | Intel, AMD                          | ARM, Apple                         |



# Memory
### Cache
| Cache Level | Description                                                            | Size                          | Speed                                      | Location                                |
|-------------|------------------------------------------------------------------------|-------------------------------|--------------------------------------------|-----------------------------------------|
| L1 Cache    | Usually in kilobytes, the fastest memory available, located in each CPU core. (Only registers are faster.) | Varies, typically smaller  | Very Fast                                   | In each CPU core                        |
| L2 Cache    | Usually in megabytes, extremely fast (but slower than L1), shared between all CPU cores. | Varies, typically larger    | Fast                                       | Shared between all CPU cores           |
| L3 Cache    | Usually in megabytes (larger than L2), faster than RAM but slower than L1/L2. (Not all CPUs use L3.) | Varies, typically larger    | Faster than RAM, slower than L1/L2          | Varies, may be shared across CPU cores |

### Random Access Memory (RAM)
![memory_structure](https://github.com/kiro6/Binary-Exploitation-Notes/assets/57776872/237b02c7-bbec-4b03-820f-e5429d6f0fae)

the RAM is split into four main segments

| Segment | Description                                                                                           |
|---------|-------------------------------------------------------------------------------------------------------|
| Stack   | Has a Last-in First-out (LIFO) design and is fixed in size. Data in it can only be accessed in a specific order by push-ing and pop-ing data. |
| Heap    | Has a hierarchical design and is therefore much larger and more versatile in storing data, as data can be stored and retrieved in any order. However, this makes the heap slower than the Stack. |
| Data    | Has two parts: Data, which is used to hold variables, and .bss, which is used to hold unassigned variables (i.e., buffer memory for later allocation). |
| Text    | Main assembly instructions are loaded into this segment to be fetched and executed by the CPU.         |

Each application would have its own stack, heap, data, and text segments


